"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Cart=function(){function t(){_classCallCheck(this,t),this.cartList=document.querySelector(".cartList"),this.init()}return _createClass(t,[{key:"init",value:function(){var t,e=window.localStorage,e=e.getItem("products")?e.getItem("products"):"",n=cookie.convertStrToObj(e);for(t in n){var i=n[t],o=document.createElement("ul");o.className="goodInfo",o.setAttribute("data-good-id",t),o.innerHTML='\n\t\t\t\t<li><img src="'.concat(i.src,'" /></li>\n\t\t\t\t<li>').concat(i.name,"</li>\n\t\t\t\t<li>").concat(i.price,'</li>\n\t\t\t\t<li class="num">\n\t\t\t\t\t<a href="javascript:;" class="minus">-</a>\n\t\t\t\t\t<input type="text" name="" id="" value="').concat(i.num,'" />\n\t\t\t\t\t<a href="javascript:;" class="plus">+</a>\n\t\t\t\t</li>\n\t\t\t\t<li class="total">').concat(i.price*i.num,'</li>\n\t\t\t\t<li><a href="javascript:;" class="del">删除</a></li>\n\t\t\t'),this.cartList.appendChild(o)}for(var c=document.querySelectorAll(".p1"),r=0,a=c.length;r<a;r++)c[r].onclick=function(){var t=this.parentNode.parentNode.getAttribute("#content"),e=window.localStorage.getItem("#content")?window.localStorage.getItem("#content"):"",e=cookie.convertStrToObj(e);1<e[t].num&&e[t].num--,window.localStorage.setItem("products",JSON.stringify(e)),this.nextElementSibling.value=e[t].num,this.parentNode.nextElementSibling.innerText=e[t].price*e[t].num};document.querySelectorAll(".p2");for(var l=0,s=plus.length;l<s;l++)plus[l].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("products")?window.localStorage.getItem("products"):"",e=cookie.convertStrToObj(e);e[t].num++,window.localStorage.setItem("products",JSON.stringify(e)),this.previousElementSibling.value=e[t].num,this.parentNode.nextElementSibling.innerText=e[t].price*e[t].num};for(var u=document.querySelectorAll(".o"),d=0,p=u.length;d<p;d++)u[d].onblur=function(){var t=this.parentNode.parentNode.getAttribute(".li4"),e=window.localStorage.getItem("products")?window.localStorage.getItem("products"):"",e=cookie.convertStrToObj(e),n=this.value;/^\d+$/.test(n)&&0<n||(n=1),e[t].num=n,window.localStorage.setItem("products",JSON.stringify(e)),this.value=e[t].num,this.parentNode.nextElementSibling.innerText=e[t].price*e[t].num};for(var h=document.querySelectorAll(".del"),f=0,g=h.length;f<g;f++)h[f].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage.getItem("products")?window.localStorage.getItem("products"):"",e=cookie.convertStrToObj(e);delete e[t],window.localStorage.setItem("products",JSON.stringify(e)),this.parentNode.parentNode.remove()}}}]),t}();$(document).ready(function(){$(function(){function n(){var n=0,i=0;$(".i6").each(function(t,e){n+=parseInt($(e).val().replace("￥",""))}),$(".div15 em").text(n),$(".span1").each(function(t,e){i+=parseFloat($(e).text().substr(1).replace("￥",""))}),$(".div17 em").text(i.toFixed(2))}$(".tui-checkbox2").change(function(){$(".check,.tui-checkbox2,#ck").prop("checked",$(this).prop("checked"))}),$(".check,.tui-checkbox2").change(function(){$(".check:checked").length===$(".check").length?$(".tui-checkbox2,.tui-checkbox").prop("checked",!0):$(".tui-checkbox2,.tui-checkbox").prop("checked",!1)}),$(".p1").click(function(){var t=$(this).siblings(".i6").val();t++,$(this).siblings(".i6").val(t);var e=(e=$(this).parent().prev().find(".o").text()).substr(1),e=$(this).parent().next().find(".span1").text("￥"+(e*t).toFixed(2));console.log(e),n()}),$(".p2").click(function(){var t=$(this).siblings(".i6").val();if(1==t)return!1;t--,$(this).siblings(".i6").val(t);e=(e=$(this).parent().prev().find(".o").text()).substr(1);var e=$(this).parent().next().find(".span1").text("￥"+(e*t).toFixed(2));n()}),$(".i6").change(function(){var t=$(this).val(),e=(e=$(this).parent().prev().find(".o").text()).substr(1);$(this).parent().next().find(".span1").text("￥"+(e*t).toFixed(2)),n()}),$(".p3").click(function(){alert("确定要删除该商品？"),$(this).parents("#content").remove(),n()}),$(".p3").click(function(){$(this).parents("#content").remove(),n()}),$(".div12").click(function(){$(".check:checked").parents("#content").remove(),n()}),$(".div14").click(function(){$(this).$("#content").remove(),n()})}),$("#a1").click(function(){alert("您的订单已成功,现在去付款吧!")}),$("#d2").click(function(){$(this).prev(".floot").remove(),$(this).remove()})});